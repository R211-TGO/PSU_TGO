<nav class="navbar bg-base-100 p-3 shadow-md">
  <!-- Sidebar Toggle Button -->
  <div class="flex-none">
    <label for="sidebar-toggle" class="btn btn-ghost btn-square">
      <i data-feather="menu" class="h-6 w-6"></i>
    </label>
  </div>

  <!-- Page Title -->
  <div class="flex-1 flex flex-col pl-4">
    {% set path = request.path %}
    {% if path == '/' %}
      {% set page_title = t.sidebar_user %}
      {% set page_subtitle = t.subtitle_dashboard %}
    {% elif path.startswith('/users-management') %}
      {% set page_title = t.sidebar_user %}
      {% set page_subtitle = t.subtitle_user %}
    {% elif path.startswith('/role-management') %}
      {% set page_title = t.sidebar_role %}
      {% set page_subtitle = t.subtitle_role %}
    {% elif path.startswith('/form-management') %}
      {% set page_title = t.sidebar_form %}
      {% set page_subtitle = t.subtitle_form %}
    {% elif path.startswith('/emissions-scope') %}
      {% set page_title = t.sidebar_emissions %}
      {% set page_subtitle = t.subtitle_emissions_scope %}
    {% elif path.startswith('/emissions') %}
      {% set page_title = t.sidebar_emissions %}
      {% set page_subtitle = t.subtitle_emissions %}
    {% elif path.startswith('/summary') %}
      {% set page_title = t.sidebar_summary %}
      {% set page_subtitle = t.subtitle_summary %}
    {% elif path == '/reports' %}
      {% set page_title = 'Reports' %}
      {% set page_subtitle = t.subtitle_reports %}
    {% elif path.startswith('/setting') %}
      {% set page_title = t.sidebar_settings %}
      {% set page_subtitle = t.subtitle_settings %}
    {% elif path.startswith('/profile') %}
      {% set page_title = 'Profile' %}
      {% set page_subtitle = t.subtitle_profile %}
    {% else %}
      {% set page_title = t.scope_management %}
      {% set page_subtitle = t.subtitle_scope_management %}
    {% endif %}

    <span class="text-lg font-bold text-base-content">{{ page_title }}</span>
    <span class="text-sm text-gray-600">{{ page_subtitle }}</span>
  </div>

  <!-- User Profile -->
  <div class="flex-none flex items-center gap-4">
    <!-- Language Switch -->
    <form method="post" action="{{ url_for('setting.setting') }}">
      <input type="hidden" name="next" value="{{ request.full_path }}">
      <select name="language" onchange="this.form.submit()" class="select select-sm select-bordered">
        <option value="th" {% if lang == 'th' %}selected{% endif %}>ไทย</option>
        <option value="en" {% if lang == 'en' %}selected{% endif %}>English</option>
      </select>
    </form>

    <!-- User info -->
    <a href="/profile/" class="flex items-center gap-2">
      <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center text-primary-content font-bold">
        <span class="text-lg font-bold">{{ current_user.username[0]|upper }}</span>
      </div>
      <span class="ml-2 text-base font-medium text-base-content">{{ current_user.username }}</span>
    </a>
  </div>
</nav>
