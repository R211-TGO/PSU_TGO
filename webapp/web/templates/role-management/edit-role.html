<h2 class="text-lg font-bold mb-4">{{ t.edit_role }}</h2>
<form hx-post="{{ url_for('role_management.edit_role', role_id=role.id) }}"
      hx-target="#modal-content"
      hx-swap="innerHTML">
  <div class="mb-2">
    <label class="block text-sm font-medium">{{ t.name }}</label>
    <input type="text" name="name" value="{{ role.name }}" class="input input-bordered w-full" required>
  </div>
  <div class="mb-2">
    <label class="block text-sm font-medium">{{ t.description }}</label>
    <textarea name="description" class="textarea textarea-bordered w-full">{{ role.description }}</textarea>
  </div>

  <div class="mb-4">
    <label class="block text-sm font-medium mb-1">{{ t.permissions }}</label>
    <div class="grid grid-cols-2 gap-4 max-h-40 overflow-y-auto">
      {% for perm in permissions %}
        <div class="flex items-center space-x-2 relative">
          <input type="checkbox"
                 name="permissions"
                 value="{{ perm.id }}"
                 id="perm-{{ perm.id }}"
                 class="checkbox checkbox-primary rounded-full"
                 {% if perm.id in selected_permission_ids %}checked{% endif %}
                 title="{{ perm.description }}">
          <label for="perm-{{ perm.id }}" class="text-sm">
            {{ perm.name | capitalize }}
          </label>
        </div>
      {% endfor %}
    </div>
  </div>

  {% if error_msg %}
  <p class="text-red-500 text-sm mb-2">{{ error_msg }}</p>
  {% endif %}

  <div class="flex justify-end space-x-2">
    <button type="button" class="btn"
            onclick="document.getElementById('modal').classList.remove('modal-open')">{{ t.cancel }}</button>
    <button type="submit" class="btn btn-primary">{{ t.save }}</button>
  </div>
</form>
