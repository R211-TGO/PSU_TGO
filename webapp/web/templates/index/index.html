<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    {% block title %}
    PSU-TGO
    {% endblock %}
  </title>
  <link rel="stylesheet" href="{{ 'css/app.css' | static_url }}">
  <script src="https://unpkg.com/feather-icons"></script>
  <script src="{{ 'node_modules/htmx.org/dist/htmx.min.js' | static_url }}"></script>
  <script src="{{ 'node_modules/cally/dist/cally.js' | static_url }}"></script>
  <script src="{{ 'js/date-picker.js' | static_url }}"></script>
  {% block head %}
  {% endblock head %}
</head>

<body>
  <div class="flex h-screen overflow-hidden">
    <!-- Sidebar Toggle -->
    <input id="sidebar-toggle" type="checkbox" class="hidden peer" />

    <!-- Overlay -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-black opacity-0 pointer-events-none z-10 transition-opacity duration-300"></div>

    <!-- Sidebar -->
    <div id="sidebar" class="sidebar fixed top-0 left-0 h-full bg-base-200 shadow-md z-20">
      {% include "base/sidebar.html" %}
    </div>

    <!-- Main Content -->
    <div id="main-content" class="flex-1 flex flex-col w-full">
      <!-- Navbar -->
      <div class="w-full bg-base-100 z-1">
        {% include "base/navbar.html" %}
      </div>
      
      <!-- Scrollable Body -->
      <div class="p-2 flex-grow bg-base-200 z-0 overflow-y-auto">
        {% block body %}
        <div class="px-3 lg:px-5 py-10 mx-auto">
          {% block content %}

        <!-- Background Video -->
          <video autoplay muted loop playsinline class="fixed inset-0 w-full h-full object-cover -z-10">
            <source src="/static/imagines/dashboard-image.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>

          <!-- Hero Section -->
          <section class="py-24 px-8 text-center max-w-4xl mx-auto">
            <div class="max-w-3xl mx-auto">
              <h1 class="animate-fade-up text-4xl font-bold text-white">Understand Your Impact on the Planet</h1>
              <p class="animate-fade-up delay-100 mt-4 text-lg text-white">
                ถ้าเปลี่ยนมาใช้ชีวิตอย่างใส่ใจ ยั่งยืนต่อสิ่งแวดล้อม เรื่องที่สอนคือ Basic Python
              </p>
              <div class="animate-fade-up delay-200 mt-6 space-x-4">
                <a href="#" class="bg-green-600 text-white px-6 py-2 rounded-full hover:bg-green-700">Calculate My Footprint ➜</a>
                <a href="#" class="border border-white text-white px-6 py-2 rounded-full hover:bg-white hover:text-green-600">Learn More</a>
              </div>
            </div>  
          </section>

          <!-- Dashboard Section -->
          <section class="bg-white py-16 px-8 mt-8 rounded-3xl shadow-lg max-w-6xl mx-auto">
            <div class="text-center">
              <h2 class="text-2xl font-semibold text-green-900">Your Carbon Dashboard</h2>
              <p class="mt-2 text-gray-700">
                Track your process and see the impact of your daily choices on your overall carbon footprint.
              </p>
              
              <div class="mt-6 flex justify-center space-x-4 border-b border-gray-200">
                <button class="px-4 py-2 text-green-600 border-b-2 border-green-600 font-medium">Week</button>
                <button class="px-4 py-2 text-gray-600 hover:text-green-600">Month</button>
                <button class="px-4 py-2 text-gray-600 hover:text-green-600">Year</button>
              </div>
            </div>

            <div class="mt-10 grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
              <div class="bg-gray-50 p-6 rounded-xl shadow">
                <p class="text-gray-500">Total Emissions</p>
                <h3 class="text-2xl font-bold">236.8 kg</h3>
                <p class="text-sm text-gray-400">This week</p>
              </div>
              <div class="bg-gray-50 p-6 rounded-xl shadow">
                <p class="text-gray-500">Daily Average</p>
                <h3 class="text-2xl font-bold">33.8 kg</h3>
                <p class="text-sm text-gray-400">15 kg/goal</p>
              </div>
              <div class="bg-gray-50 p-6 rounded-xl shadow">
                <p class="text-gray-500">Reduction</p>
                <h3 class="text-2xl font-bold text-green-600">16.7%</h3>
                <p class="text-sm text-gray-400">From previous week</p>
              </div>
            </div>
          </section>
        {% endblock content %}
      </div>
      {% endblock body %}
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div id="modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div id="modal-content" class="modal-box w-full max-w-none bg-white">
      <!-- เนื้อหาจะถูกโหลดที่นี่ -->
    </div>
  </div>
  
  <!-- Feather Replace Script -->
  <script>
    feather.replace();
  </script>
  
  <style>
    /* Sidebar Transition - สมูธการขยายและหด */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 16rem;
      height: 100%;
      transform: translateX(-100%);
      transition: transform 0.4s ease-in-out;
      z-index: 30;
    }

    #sidebar-toggle:checked ~ .sidebar {
      transform: translateX(0);
    }
    
    /* Overlay */
    #sidebar-overlay {
      z-index: 20;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }
    
    #sidebar-toggle:checked ~ #sidebar-overlay {
      opacity: 0.5;
      pointer-events: auto;
    }

    /* Main Content - Transition สมูธขยับ */
    #main-content {
      transition: margin-left 0.4s ease-in-out;
    }

    #sidebar-toggle:checked ~ #main-content {
      margin-left: 16rem;
    }

    /* ปิดไซด์บาร์เมื่อคลิกที่ overlay */
    label[for="sidebar-toggle"] {
      cursor: pointer;
      z-index: 40;
    }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const sidebarToggle = document.getElementById('sidebar-toggle');
      const overlay = document.getElementById('sidebar-overlay');
      
      overlay.addEventListener('click', function() {
        sidebarToggle.checked = false;
      });
    });
  </script>

  {% block js %}
  {% endblock js %}
</body>

</html>
